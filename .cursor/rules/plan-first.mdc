---
description: 
globs: 
alwaysApply: true
---
---
description: Enforce verbose planning / blueprint phase
globs: "*"
alwaysApply: true
---

# Plan-First Workflow

1. **When starting any task**  
   1.1 Draft a "Blueprint" section that lists the **goal** and every **major
       sub-step** required.  
   1.2 Break sub-steps further into numbered bullet points if they involve
       multiple actions (e.g. "1. Create Dynamo table → 2. Add IAM policy → 3.
       Wire into handler"). 
   1.3 Plans should be saved to:
       - `plans/<feature>.md` for cross-component or infrastructure features
       Always share your plan in chat.  
   1.4 **Format requirement – use a TODO checklist**  
       - Write each sub-step as a Markdown checkbox `- [ ] description` so they can be ticked off (`- [x]`) during implementation.  
       - Keep the list ordered and easy to scan.  
       - Include the goal description above the checklist. 
       - Do not include timeline
   1.5 **Prompt the user** with:  
       > _"Please review the blueprint; reply **PROCEED** to continue or **EDIT** to make changes."_  
   1.6 **All changes made during implementation must be directly related to the feature described in the plan.**  
       Avoid unrelated refactoring, cleanup, or improvements unless explicitly included in the blueprint and approved by the user.
2. **Only after receiving **PROCEED****  
   2.1 Implement code **one sub-step at a time**.  
   2.2 After each sub-step, update the plan file by marking the bullet with
       `[x]` and post a brief progress summary.  
   2.3 If a sub-step needs clarification, pause and ask.

3. **Completion**  
   - Ensure every item in the plan is `[x]`.  
   - Post a final summary and ask for acceptance.  
   - Commit the updated `plan_<feature>.md` alongside the code changes.

_Never skip this workflow._  If an urgent one-liner fix seems trivial, still
produce at least a minimal blueprint (goal + single step) before coding.